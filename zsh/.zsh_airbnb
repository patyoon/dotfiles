export SYSOPS_PATH=/Users/patrick_yoon/workspace/sysops
export PATH=$PATH:/opt/airbnb/bin:$SYSOPS_PATH/optica_tools

# afdev
export DATA_DIR=$HOME/workspace/data #PATH WHERE YOU CLONED THE DATA REPO
export AFDEV_HOST="i-03923bd837dbdc0f6.inst.aws.us-east-1.prod.musta.ch" #CHOOSE A DIFFERENT HOST
export CDH_GOLD_HOST="i-9dda8d4f.inst.aws.us-east-1.prod.musta.ch"
export AFDEV_PORT=61903 #CHOOSE A DIFFERENT PORT

# optional
export AFDEV_USER="patrick_yoon"

# TODO: Set your environment variables below
export BIGHEAD_OS=~/workspace/bighead
export BIGHEAD_TH=~/workspace/treehouse/projects/bighead
export ML_MODELS=~/workspace/ml_models/

# clean up maven
function zbuild {
    rm -rf ~/.m2/repository/ai/bighead/
    pushd $BIGHEAD_OS/thrift/generic > /dev/null && ../../gradlew publish && popd > /dev/null
    pushd $BIGHEAD_OS/zipline/ > /dev/null && ../gradlew publish && popd > /dev/null
}

# make sure you set the BIGHEAD_VERSION in ~/repos/treehouse/gradle.properties to 0.0.1-local2
function zssync {
    pushd $BIGHEAD_TH/zipline/streaming
    ../../../../gradlew shadowJar && scp build/libs/streaming-all.jar $AFDEV_HOST:/tmp/zipline-streaming.jar
    popd
}

function bhsync {
    pushd $BIGHEAD_OS/zipline/batch
    ../../gradlew shadowJar && scp build/libs/batch-0.0.1-local-all.jar $AFDEV_HOST:/tmp/batch-0.0.1-local-all.jar
    popd
}

function ml_models_sync {
    scp -r $ML_MODELS $AFDEV_HOST:/tmp/
}

function zbsync {
    pushd $BIGHEAD_TH/zipline/batch
    ../../../../gradlew shadowJar && scp build/libs/batch-all.jar $AFDEV_HOST:/tmp/zipline-batch.jar
    popd
}

function gen_thrift {
    pushd $BIGHEAD_OS
    thrift --gen py -out python/bighead/_thrift/ thrift/schemas/zipli\ne_data.thrift
    popd
}

function gen_zipline_thrift {
    pushd $BIGHEAD_OS
    thrift --gen py -out python/bighead/_thrift/ zipline/if/Api.thrift
    popd
}

alias ssh_tunnel="$DATA_DIR/scripts/compute-frameworks/utils/ssh_tunnel"
export REDSPOT_TEST=$(optica role=redspot-test-01)


