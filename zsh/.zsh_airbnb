export SYSOPS_PATH=/Users/patrick_yoon/workspace/sysops
export PATH=$PATH:/opt/airbnb/bin:$SYSOPS_PATH/optica_tools

# afdev
export DATA_DIR=$HOME/workspace/data #PATH WHERE YOU CLONED THE DATA REPO
export AFDEV_HOST="i-0acf144b3ec2115b0.inst.aws.us-east-1.prod.musta.ch" #CHOOSE A DIFFERENT HOST
export AFDEV_PORT=61903 #CHOOSE A DIFFERENT PORT

# optional
export AFDEV_USER="patrick_yoon"

# TODO: Set your environment variables below
export BIGHEAD_OS=~/repos/bighead
export BIGHEAD_TH=~/repos/treehouse/projects/bighead
export AFDEV_HOST=i-0a55744d91bc4533a.inst.aws.airbnb.com

# clean up maven
function zbuild {
    rm -rf ~/.m2/repository/ai/bighead/
    pushd $BIGHEAD_OS/thrift/generic > /dev/null && ../../gradlew publish && popd > /dev/null
    pushd $BIGHEAD_OS/zipline/ > /dev/null && ../gradlew publish && popd > /dev/null
}

# make sure you set the BIGHEAD_VERSION in ~/repos/treehouse/gradle.properties to 0.0.1-local2
function zssync {
    pushd $BIGHEAD_TH/zipline/streaming
    ../../../../gradlew shadowJar && scp build/libs/streaming-all.jar $AFDEV_HOST:/tmp/zipline-streaming.jar
    popd
}

function zbsync {
    pushd $BIGHEAD_TH/bighead/zipline/batch
    ../../../../gradlew shadowJar && scp build/libs/batch-all.jar $AFDEV_HOST:/tmp/zipline-batch.jar
    popd
}

function gen_thrift {
    pushd $BIGHEAD_OS
    thrift --gen py -out python/bighead/_thrift/ thrift/schemas/zipline_data.thrift
    popd
}

function gen_zipline_thrift {
    pushd $BIGHEAD_OS
    thrift --gen py -out python/bighead/_thrift/ zipline/if/Api.thrift
    popd
}
